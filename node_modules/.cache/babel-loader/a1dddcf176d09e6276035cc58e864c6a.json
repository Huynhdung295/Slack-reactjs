{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/Admin/Desktop/CloneReactJS/slack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _slicedToArray from\"C:/Users/Admin/Desktop/CloneReactJS/slack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2;import'./App.css';import{useEffect,useState}from'react';import{BrowserRouter as Router,Route,Switch}from'react-router-dom';import Chat from'./components/Chat';import Login from'./components/Login';import styled from'styled-components';import Header from'./components/Header';import Sidebar from'./components/Sidebar';import db from'./firebase';import{auth,provider}from\"./firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),rooms=_useState2[0],setRooms=_useState2[1];var _useState3=useState(JSON.parse(localStorage.getItem('user'))),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var getChannels=function getChannels(){db.collection('rooms').onSnapshot(function(snapshot){setRooms(snapshot.docs.map(function(doc){return{id:doc.id,name:doc.data().name};}));});};var signOut=function signOut(){auth.signOut().then(function(){localStorage.removeItem('user');setUser(null);});};useEffect(function(){getChannels();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(Router,{children:!user?/*#__PURE__*/_jsx(Login,{setUser:setUser}):/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Header,{signOut:signOut,user:user}),/*#__PURE__*/_jsxs(Main,{children:[/*#__PURE__*/_jsx(Sidebar,{rooms:rooms}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/room/:channelId\",children:/*#__PURE__*/_jsx(Chat,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/\",children:\"Select or Create Channel\"})]})]})]})})});}export default App;var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 100vh;\\n  display: grid;\\n  grid-template-rows: 38px minmax(0, 1fr);\\n\"])));var Main=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-template-columns: 260px auto;\\n\"])));","map":{"version":3,"sources":["C:/Users/Admin/Desktop/CloneReactJS/slack/src/App.js"],"names":["useEffect","useState","BrowserRouter","Router","Route","Switch","Chat","Login","styled","Header","Sidebar","db","auth","provider","App","rooms","setRooms","JSON","parse","localStorage","getItem","user","setUser","getChannels","collection","onSnapshot","snapshot","docs","map","doc","id","name","data","signOut","then","removeItem","Container","div","Main"],"mappings":"qXACA,MAAO,WAAP,CACA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,aAAa,GAAIC,CAAAA,MAA1B,CAAkCC,KAAlC,CAAyCC,MAAzC,KAAuD,kBAAvD,CACA,MAAOC,CAAAA,IAAP,KAAiB,mBAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,oBAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,sBAApB,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,CACA,OAASC,IAAT,CAAeC,QAAf,KAA+B,YAA/B,C,wFAGA,QAASC,CAAAA,GAAT,EAAe,eAEab,QAAQ,CAAC,EAAD,CAFrB,wCAENc,KAFM,eAECC,QAFD,8BAGaf,QAAQ,CAACgB,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAD,CAHrB,yCAGLC,IAHK,eAGCC,OAHD,eAKb,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxBZ,EAAE,CAACa,UAAH,CAAc,OAAd,EAAuBC,UAAvB,CAAkC,SAACC,QAAD,CAAc,CAC9CV,QAAQ,CAACU,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACC,GAAD,CAAS,CAClC,MAAO,CAAEC,EAAE,CAAED,GAAG,CAACC,EAAV,CAAcC,IAAI,CAAEF,GAAG,CAACG,IAAJ,GAAWD,IAA/B,CAAP,CACD,CAFQ,CAAD,CAAR,CAGD,CAJD,EAMD,CAPD,CASA,GAAME,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpBrB,IAAI,CAACqB,OAAL,GAAeC,IAAf,CAAoB,UAAI,CACtBf,YAAY,CAACgB,UAAb,CAAwB,MAAxB,EACAb,OAAO,CAAC,IAAD,CAAP,CACD,CAHD,EAID,CALD,CAOAtB,SAAS,CAAC,UAAK,CACbuB,WAAW,GACZ,CAFQ,CAEN,EAFM,CAAT,CAKA,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,KAAC,MAAD,WAEI,CAACF,IAAD,cACA,KAAC,KAAD,EAAO,OAAO,CAAEC,OAAhB,EADA,cAGA,MAAC,SAAD,yBACE,KAAC,MAAD,EAAQ,OAAO,CAAEW,OAAjB,CAA0B,IAAI,CAAEZ,IAAhC,EADF,cAEE,MAAC,IAAD,yBACE,KAAC,OAAD,EAAU,KAAK,CAAEN,KAAjB,EADF,cAEE,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,IAAI,CAAC,kBAAZ,uBACE,KAAC,IAAD,EAAM,IAAI,CAAEM,IAAZ,EADF,EADF,cAIE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,sCAJF,GAFF,GAFF,GALJ,EADF,EADF,CAyBD,CAED,cAAeP,CAAAA,GAAf,CAEA,GAAMsB,CAAAA,SAAS,CAAG5B,MAAM,CAAC6B,GAAV,mKAAf,CAOA,GAAMC,CAAAA,IAAI,CAAG9B,MAAM,CAAC6B,GAAV,6HAAV","sourcesContent":["\nimport './App.css';\nimport { useEffect, useState } from 'react'\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\nimport Chat from './components/Chat'\nimport Login from './components/Login'\nimport styled from 'styled-components'\nimport Header from './components/Header'\nimport Sidebar from './components/Sidebar'\nimport db from './firebase'\nimport { auth, provider } from \"./firebase\";\n\n\nfunction App() {\n\n  const [rooms, setRooms] = useState([]) \n  const [ user, setUser ] = useState(JSON.parse(localStorage.getItem('user'))); \n\n  const getChannels = () => {\n    db.collection('rooms').onSnapshot((snapshot) => {\n      setRooms(snapshot.docs.map((doc) => {\n        return { id: doc.id, name: doc.data().name }\n      }))\n    })\n\n  }\n\n  const signOut = () => {\n    auth.signOut().then(()=>{\n      localStorage.removeItem('user');\n      setUser(null);\n    })\n  }\n\n  useEffect(() =>{\n    getChannels();\n  }, [])\n\n\n  return (\n    <div className=\"App\">\n      <Router>\n        {\n          !user ?\n          <Login setUser={setUser}/>\n          :\n          <Container>\n            <Header signOut={signOut} user={user} />\n            <Main>\n              <Sidebar  rooms={rooms}  /> \n              <Switch>\n                <Route path=\"/room/:channelId\">\n                  <Chat user={user} />\n                </Route>\n                <Route path=\"/\">\n                  Select or Create Channel\n                </Route>\n              </Switch>\n            </Main>\n          </Container>\n        }\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n\nconst Container = styled.div`\n  width: 100%;\n  height: 100vh;\n  display: grid;\n  grid-template-rows: 38px minmax(0, 1fr);\n`\n\nconst Main = styled.div`\n  display: grid;\n  grid-template-columns: 260px auto;\n`\n"]},"metadata":{},"sourceType":"module"}